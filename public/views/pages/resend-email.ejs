<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" type="text/css" href="/styles/global.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/styles/pages/resend-email.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="/styles/components/spinner.css"
    />

    <title>Entre ou cadastre-se</title>
  </head>
  <body data-id="body">
    <div class="container" data-id="container">
      <main class="check-mail">
        <img
          src="/assets/mail-send.svg"
          alt="Email enviado"
          class="check-mail__img"
        />

        <h1 class="check-mail__title">Verifique seu e-mail</h1>
        <p class="check-mail__text">
          Enviamos um link de verificação para o endereço de e-mail cadastrado,
          verifique a caixa de entra ou a aba "span".
          <strong class="check-mail__email" data-id="mail">testing</strong>
        </p>

        <div class="problem">
          <p class="problem__message">Não recebeu a comfirmação por e-mail?</p>

          <a href="/sign-in" class="problem__resend"
            >Reenviar usando um e-mail deferente.</a
          >
        </div>
      </main>

      <div class="spinner-loading" data-id="loading">
        <div class="spinner"></div>
      </div>
    </div>

    <script type="module">
      import Loader from '/scripts/classes/Loader.js';

      const mail = document.querySelector('[data-id="mail"]');

      function checkCurrentEmail() {
        const email = new URLSearchParams(location.search).get('email');

        if (!email) {
          return location.assign('/sign-in');
        }

        mail.textContent = email;

        Loader.stop();
      }

      checkCurrentEmail();
    </script>
  </body>
</html>
